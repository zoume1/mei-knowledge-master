(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{293:function(e,t,n){},341:function(e,t,n){"use strict";n(293)},368:function(e,t,n){"use strict";n.r(t);n(44);var o=n(239),i=n(291),l=n(242),s=n(246);let a,r,c,u,d,p;console.log("init");let g=[{value:100,point:new o.Sb(.9228061177986433,6.098983904751975,-43.16601655041643)},{value:50,point:new o.Sb(71.71140339258446,20.084578276989106,-38.84333245791214)}];var w={data:()=>({gui:null}),beforeDestroy(){this.gui&&this.gui.destroy()},mounted(){console.log("start");function e(e){e.traverse(e=>{if("Mesh"==e.type){let t=e.geometry;t.morphAttributes.position=[];const n=t.attributes.position;let i=[];for(let e=0;e<n.count;e++){const t=new o.Sb(n.getX(e),n.getY(e),n.getZ(e));let l,s;for(let e=0;e<g.length;e++){let n=g[e].point.distanceTo(t);(0==e||n<l)&&(l=n,s=g[e])}let a=0;l<p.infulence&&(a=s.value*((p.infulence-l)/p.infulence));const r=t.y+a;i.push(t.x,r,t.z)}t.morphAttributes.position[0]=new o.w(i,3),e.updateMorphTargets(),e.morphTargetInfluences[0]=p.weight}})}function t(){c.clear(),c.render(d,r)}!function(){a=document.getElementById("container"),d=new o.xb,d.background=new o.p(16777215);const n=a.clientWidth,g=a.clientHeight;r=new o.jb(60,n/g,.1,3e3),r.position.set(0,0,100),d.add(r),u=new o.z,d.add(u),p={infulence:100,weight:1},function(){console.log("初始化");(new s.a).load("/daodao-knowledge/models/obj/滑坡.obj",(function(n){console.log(n),e(n),u.add(n),t()}))}();const w=new o.nb(268435455,1);r.add(w),c=new o.Vb({antialias:!0}),c.autoClear=!1,c.setPixelRatio(window.devicePixelRatio),c.setSize(n,g),a.appendChild(c.domElement);new l.a(r,c.domElement).addEventListener("change",t);var f=new i.GUI({},a);f.add(p,"infulence",0,100).onChange((function(){e(u),t()})),f.add(p,"weight",0,1).step(.01).onChange((function(e){u.traverse(t=>{"Mesh"==t.type&&(t.morphTargetInfluences[0]=e)}),t()}))}()}},f=(n(341),n(14)),v=Object(f.a)(w,(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("写这篇的原因是公司想做三维仿真，就是让模型根据测点数据发生形变，想了很久决定还是验证一下我心中的想法能不能够实现，我的思路如下：")]),e._v(" "),t("ol",[t("li",[e._v("首先拿到模型的顶点位置")]),e._v(" "),t("li",[e._v("根据数据计算出新的顶点位置，就是插值之类的啦")]),e._v(" "),t("li",[e._v("将新的顶点位置存入morphTargetInfluences中，并设置权重为1改变模型形状")]),e._v(" "),t("li",[e._v("周期设置0-1的权重可以实现振动动画")])]),e._v(" "),t("p",[e._v("好了开始试试吧：")]),e._v(" "),t("div",{attrs:{id:"container"}})])}),[],!1,null,null,null);t.default=v.exports}}]);